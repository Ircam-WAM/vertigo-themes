{% extends "vertigo_starts_eu/pages/page.html" %}
{% load mezzanine_tags staticfiles keyword_tags i18n organization_tags pages_tags %}


{% block extra_head %}

    {% compress css %}
    <link rel="stylesheet" href="{% static "css/detail_items.css" %}">
    {% endcompress %}

{% endblock %}


{% block meta_title %}
    {{ object.meta_title }}
{% endblock %}


{% block meta_keywords %}
    {% metablock %}
    {% keywords_for object as keywords %}
    {% for keyword in keywords %}
        {% if not forloop.first %}, {% endif %}
        {{ keyword }}
    {% endfor %}
    {% endmetablock %}
{% endblock %}


{% block page_class %}
    object
{% endblock %}


{% block body_class %}
    pattern pattern-bg {{ department.pages.all.0.weaving_css_class }}
{% endblock %}


{% block breadcrumb_menu %}
    {{ block.super }}
    <li class="breadcrumb__item active">{{ object.title }}</li>
{% endblock %}


{% block page_tags %}

    {% comment %}
        {% if department %}
            <div class="tag dashed dashed--yellow">
              {{ department.pages.all.0.title }}
            </div>
        {% endif %}
        <div class="tag tag--category">
            {% trans 'Project' %}
        </div>
    {% endcomment %}

{% endblock %}


{% block page_title %}

{% endblock %}


{% block page_content %}

    <div class="row">
        <div class="col-sm-16 col-md-10 col-md-push-3 tac">
            <h1 class="section-title section-title--uppercase section-title--main section-title--underline">{% trans "Tech Project" %}</h1>
        </div>
    </div>

    {# Edit message and button if user owns it and it is a draft #}
    {% if user.is_authenticated %}
        {% if user == object.user %}
            <div class="project-ict-detail__editable">
                <div>Welcome to your project detail page.</div>
                <div>The status of your project is: {{ object.get_validation_status_display }}.</div>
                {% if object.validation_status == 1 %}
                    <a href="{% url "organization-call-project-update" object.call.slug object.slug %}">
                        <div class="project-ict-detail__edit_button">
                            <span>Edit</span>
                        </div>
                    </a>
                {% else %}
                    <div>You can no longer edit your project.</div>
                {% endif %}
            </div>
        {% endif %}
    {% endif %}

    {# Title #}
    <div class="project-ict-detail__title">
        {{ object.title }}
    </div>

    {# Main info #}
    <div class="project-ict-detail__main_info">
        {% if object.public_data.all.0.brief_description %}
            <div class="project-ict-detail__main_info-description">{{ object.public_data.all.0.brief_description }}</div>
        {% endif %}
        {% if object.website %}
            <div class="project-ict-detail__main_info-website"><a href="{{ object.website }}">{{ object.website }}</a></div>
        {% endif %}
        {% if object.date_from and object.date_to %}
            <div class="project-ict-detail__main_info-date">{% trans "From" %} {{ object.date_from }} {% trans "to" %} {{ object.date_to }}</div>
        {% endif %}
        {% if object.keywords_string %}
            <div class="project-ict-detail__main_info-keywords">{% trans "Keywords" %}: {{ object.keywords_string }}</div>
        {% endif %}
    </div>

    {# Apply button #}
    {% if object.validation_status == 3 %}
        <a href="{% url 'web:show_application_form' object.call.slug %}?show_draft&project={{ object.slug }}">
            <div class="project-ict-detail__apply_button">
                <span>APPLY!</span>
            </div>
        </a>
    {% endif %}

    {# Slider #}
    <div class="project-ict-detail__slider">
        <div class="page__slider detail_slider">
            <ul class="slider-page" data-slider-page>
                {% for image in object.user_images.all %}
                    <li class="slider-page__slide" data-src="{{ MEDIA_URL }}{{ image.file }}">
                        <div class="slider-page__wrapper">
                            <img title="{{ image.title }}" alt="{{ image.title }} {{ image.description }} {{ image.credits }}" class="slider-page__img" src="{{ MEDIA_URL}}{% thumbnail image.file 0 520 %}" alt="" />
                            <div class="slider-page__caption">
                                {{ image.title }}
                                {% if image.description %}
                                    {{ image.description }}
                                {% endif %}
                                {% if image.credits|length > 0 %}
                                    Credits: {{ image.credits }}
                                {% endif %}
                            </div>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    {# Extra info #}
    <div class="project-ict-detail__extra_info">

        {% if object.public_data.all.0.challenges_description %}
            <h3>{% trans "Description of the challenges faced by the Tech Project" %}</h3>
            <p>{{ object.public_data.all.0.challenges_description }}<p>
        {% endif %}

        {% if object.public_data.all.0.technology_description %}
            <h3>{% trans "Brief description of technology" %}</h3>
            <p>{{ object.public_data.all.0.technology_description }}</p>
        {% endif %}

        {% if object.public_data.all.0.objectives_description %}
            <h3>{% trans "What the project is looking to gain from the collaboration and what kind of artist would be suitable" %}</h3>
            <p>{{ object.public_data.all.0.objectives_description }}</p>
        {% endif %}

        {% if object.public_data.all.0.resources_description %}
            <h3>{% trans "Resources available to the artist" %}</h3>
            <p>{{ object.public_data.all.0.resources_description }}</p>
        {% endif %}

    </div>

{% endblock %}


{% block page_audio %}
  {% with object as object %}
      {{ block.super }}
  {% endwith %}
{% endblock %}


{% block page_video %}
  {% with object as object %}
      {{ block.super }}
  {% endwith %}
{% endblock %}
